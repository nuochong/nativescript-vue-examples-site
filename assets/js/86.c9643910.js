(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{336:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("blockquote",[a("p",[t._v("预计升级时间： "),a("strong",[t._v("10-20 分钟")]),t._v("。")])]),t._v(" "),a("p",[t._v("如果您使用1.3.1版本的Vue-CLI模板搭建了NativeScript-Vue应用程序，则可以升级到最新版本2.0，本指南将帮助您实现这一目标。新模板与旧版本具有不同的文件夹结构：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/screenshots/old-new-folder-structure.png",alt:"New folder structure"}})]),t._v(" "),a("p",[a("strong",[t._v("步骤 1")])]),t._v(" "),a("p",[t._v("首先使用Vue-CLI模板创建一个新应用程序。")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("提示：")]),t._v(" 确保在这个新项目中使用与创建旧版本时相同的预安装命令;例如，如果您第一次在CLI中安装了Vuex，那么现在再做一次。")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g @vue/cli @vue/cli-init\n$ vue init nativescript-vue/vue-cli-template "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n$ tns run android --bundle\n$ "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or")]),t._v("\n$ tns run ios --bundle\n")])])]),a("p",[t._v("升级过程涉及将旧应用文件复制到新项目中，然后重新整理并添加一些文件。")]),t._v(" "),a("p",[a("strong",[t._v("第2步：替换应用资源")])]),t._v(" "),a("p",[t._v("复制旧应用的 "),a("code",[t._v("App_Resources")]),t._v(" 文件夹 "),a("code",[t._v("./template/app/")]),t._v(" 并将其粘贴到新应用的 "),a("code",[t._v("app")]),t._v(" 文件夹中，替换其 "),a("code",[t._v("App_Resources")]),t._v(" 文件夹。")]),t._v(" "),a("p",[a("strong",[t._v("第3步：合并 "),a("code",[t._v("src")]),t._v(" 和 "),a("code",[t._v("app")]),t._v(" 文件夹")])]),t._v(" "),a("p",[t._v("复制 "),a("code",[t._v("src")]),t._v(" 旧应用中的所有文件夹，然后将其粘贴到 "),a("code",[t._v("app")]),t._v(" 新应用中的文件夹中。")]),t._v(" "),a("p",[a("strong",[t._v("第4步：编辑 "),a("code",[t._v("main.js")])])]),t._v(" "),a("p",[t._v("NativeScript 4.0引入了一个新的Frame元素，并引入了一种更改应用程序根元素的方法，允许跨页面共享公共视图元素（导航）。")]),t._v(" "),a("p",[t._v("在4.0之前，根元素是一个Frame，它是在我们的应用程序启动时由NativeScript隐式创建的。")]),t._v(" "),a("p",[t._v("通过这些更改，我们无法再自动创建Frame和Page元素，因此在2.0.0中，您需要将这些元素显式添加到模板中。")]),t._v(" "),a("p",[t._v("要保持以前具有单个根框架的行为，可以将根Vue实例更改为带有一个 "),a("code",[t._v("<Frame>")]),t._v(" 和一个 "),a("code",[t._v("<Page>")]),t._v(" 的元素。")]),t._v(" "),a("p",[a("strong",[t._v("例子")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// in prior versions")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this automatically created a Page")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('<Label text="Hello world"/>')]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// in 2.0.0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// the <Frame> and <Page> must exist in your template")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\n    <Frame>\n      <Page>\n        <Label text="Hello world"/>\n      </Page>\n    </Frame>\n  ')]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("允许我们在不同的页面上使用共享的SideDrawer，例如：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\n    <RadSideDrawer>\n      <StackLayout ~drawerContent>...</StackLayout>\n      <Frame ~mainContent>\n        <Page>\n          <Label text="Hello world"/>\n        </Page>\n      </Frame>\n    </RadSideDrawer>\n  ')]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("然而，其最简单的形式是，类似于编辑 "),a("code",[t._v("main.js")]),t._v("的Vue初始化块：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("h")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'frame'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HelloWorld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("第5步：编辑路径")])]),t._v(" "),a("p",[t._v("由于文件夹结构已更改，您需要编辑新应用程序中的路径以指向样式，字体和图片。")]),t._v(" "),a("p",[t._v("在您的组件中，如果您的旧应用程序中的图片引用如下：")]),t._v(" "),a("div",{staticClass:"language-HTML extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Image")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("surprise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("~/images/NativeScript-Vue.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("p",[t._v("改变路径：")]),t._v(" "),a("div",{staticClass:"language-HTML extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Image")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("surprise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("~/assets/images/NativeScript-Vue.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("p",[a("strong",[t._v("第6步：对齐 "),a("code",[t._v("package.json")])])]),t._v(" "),a("p",[t._v("将旧应用根 "),a("code",[t._v("package.json")]),t._v(" 文件中的相关值复制到新应用的根 "),a("code",[t._v("package.json")]),t._v(" 文件中。这很可能需要复制 "),a("code",[t._v("Dependencies:")]),t._v(" 模块，但您可能还需要在"),a("code",[t._v("package.json")]),t._v("中重新调整新应用程序的应用程序版本和描述 。")]),t._v(" "),a("p",[a("strong",[t._v("第7步：清洁并运行")])]),t._v(" "),a("p",[t._v("此时，有个好方法就是清理新应用程序的文件夹（如果您之前已经运行它）并重新安装所有依赖项。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf platforms\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n$ tns run android --bundle\n$ "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or")]),t._v("\n$ tns run ios --bundle\n")])])]),a("p",[a("strong",[t._v("步骤8（可选）：尝试HMR")])]),t._v(" "),a("p",[t._v("就在最近，nativescript获得了对HMR（热模块更换）的支持。最新版本的NativeScript-Vue支持开箱即用，但您需要安装最新（最好）的NativeScript CLI版本。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g nativescript@next\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf platforms\n$ tns run android --hmr\n$ "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or")]),t._v("\n$ tns run ios --hmr\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);