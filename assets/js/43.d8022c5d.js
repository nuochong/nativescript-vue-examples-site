(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{387:function(t,a,s){"use strict";s.r(a);var e=s(3),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"nativescript-dev-appium-有什么新功能？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nativescript-dev-appium-有什么新功能？"}},[t._v("#")]),t._v(" nativescript-dev-appium 有什么新功能？")]),t._v(" "),s("Meta"),t._v(" "),s("p",[t._v("果您不熟悉此插件-如果您认真考虑了您的移动应用程序，则应该将其检查一下。Nativescript-dev-appium 是一个开放源代码插件，用于包装/提供对 Appium 的访问，它是测试 NativeScript 应用程序的合适方法。")]),t._v(" "),s("p",[t._v("nativescript-dev-appium 插件的主要优先级是：")]),t._v(" "),s("ul",[s("li",[t._v("便于使用")]),t._v(" "),s("li",[t._v("跨平台")]),t._v(" "),s("li",[t._v("与第三方产品和服务的兼容性")])]),t._v(" "),s("p",[t._v("考虑到这些，我们提供了一些新功能，这些功能将使您在 NativeScript 中使用 Appium 的体验更加出色。")]),t._v(" "),s("h4",{attrs:{id:"我们有什么改进？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#我们有什么改进？"}},[t._v("#")]),t._v(" 我们有什么改进？")]),t._v(" "),s("p",[t._v("让我们从尝试在本地计算机上运行测试的点开始，这可能会很痛苦。Appium 需要一堆依赖关系，不仅需要安装这些依赖关系，而且还需要为我们使用的 JavaScript 测试框架提供功能以及可能的一些附加设置。因此，说实话-解决依赖关系并不那么舒适，但至少在大多数情况下，这是一项一次性的工作。不幸的是，我们这边也没有太多事情要做，因此我们专注于如何减轻测试的执行，尤其是在开发过程中。")]),t._v(" "),s("h4",{attrs:{id:"测试执行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试执行"}},[t._v("#")]),t._v(" 测试执行")]),t._v(" "),s("p",[t._v("从那里开始，我们需要做的第一件事就是消除提供 Appium 功能的必要性。因此，让我们想象一下，您想在已经实时同步应用程序的模拟器上运行测试。以前，您被迫提供必需的 Appium 功能，但现在您只需要指定平台即可：")]),t._v(" "),s("p",[t._v("之前 "),s("code",[t._v("npm run e2e -- --runType some-device-capabilities")])]),t._v(" "),s("p",[t._v("现在 "),s("code",[t._v("npm run e2e android/ios")])]),t._v(" "),s("p",[t._v("就是这样！如果您有多个模拟器在运行，将会发生什么？'nativescript-dev-appium’目前无法执行同时测试，"),s("a",{attrs:{href:"http://xn----device-vp1mi5a00a339azj4bjijb2i.name",target:"_blank",rel:"noopener noreferrer"}},[t._v("但是您可以提供--device.name"),s("OutboundLink")],1),t._v(" =“ android-emulator-28”之类的其他参数，并且该测试仅在指定的设备上执行。")]),t._v(" "),s("p",[t._v("好吧，这似乎很好，但是随后我们必须处理以下事实：每次执行此命令时，Appium 需要先启动 appium-server，然后再启动 appium-driver，这总是需要一些时间。因此，我们提出了一个想法，即分别启动 Appium 流程并重用已经存在的会话。有了这个，不再需要等待 Appium 初始化。为此，您需要在测试执行之前再执行一条命令。")]),t._v(" "),s("p",[t._v("首先，"),s("code",[t._v("./node_modules/.bin/ns-appium [android or ios] --startSession")]),t._v(" 在单独的终端中运行： ，直到"),s("code",[t._v("sessionId")]),t._v("显示。除非需要，请不要杀死该终端。")]),t._v(" "),s("p",[t._v("然后，您可以简单地执行像"),s("code",[t._v("npm run e2e -- --attachToDebug")]),t._v(" 或那样的测试 ， "),s("code",[t._v("npm run e2e -- -a")]),t._v(" 或者简单地创建像这样的命令 "),s("code",[t._v("npm run e2e-debug")])]),t._v(" "),s("p",[t._v("当然，如果有多个会话开始，我们也需要提供"),s("code",[t._v("--sessionId")]),t._v("。另一个选择是使用 Appium 桌面应用程序启动该应用程序，并将其附加到 Appium 提供的会话中。请记住，如果您想测试一些动作/手势或找到最佳的本地化策略，这非常方便。")]),t._v(" "),s("h4",{attrs:{id:"测试报告"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试报告"}},[t._v("#")]),t._v(" 测试报告")]),t._v(" "),s("p",[t._v("与测试有关的下一个非常重要的事情是观察测试结果。从现在开始，您还可以使用 Mochawsome，它将显示图像比较的结果。请记住，如果您是第一次安装 nativescript-dev-appium，那么所有这些功能都将自动设置，并且您不需要这样做。在 setup.ts / js 中初始化报告上下文：")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" addContext "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mochawesome/addContext'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" testReporterContext "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ITestReporter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntestReporterContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mochawesome'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntestReporterContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reportDir "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mochawesome-report'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntestReporterContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" addContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntestReporterContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logImageTypes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("LogImageType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("screenshots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nnsCapabilities"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testReporter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" testReporterContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("每个"),s("code",[t._v("describe")]),t._v("都应包含"),s("code",[t._v("before")]),t._v("应在其中提供报告上下文的挂钩：")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sample scenario"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" AppiumDriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("before")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"start server"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        nsCapabilities"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testReporter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  …\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("设置 mocha opt，使用 Mochawesome 报告程序的文件[TODO：哪个文件？]：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("--timeout 999999\n--recursive e2e\n--reporter mochawesome\n--reporter-options quiet=true,html=true,inline=true,autoOpen=true\n--exit\n")])])]),s("h4",{attrs:{id:"图像比较"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#图像比较"}},[t._v("#")]),t._v(" 图像比较")]),t._v(" "),s("p",[t._v("的"),s("code",[t._v("viewPortRect")]),t._v("换言之其中部分显示选项或应包括在图像比较。幸运的是，Appium 提供了 viewPortRect 功能，可帮助我们了解图像比较中应包括显示的哪一部分。由于 Appium> = 1.10.0 并结合了 UIAutomator2（Android）和 XCUITests（iOS），因此可以使用此功能。如果需要覆盖此设置，可以在 appium 功能文件中提供 viewPortRect。但这还不是全部。您还可以为每个测试提供 ns-dev-appium 将在图像验证中考虑的不同矩形。")]),t._v(" "),s("p",[s("code",[t._v("driver.imageHelper.options.cropRectangle = {x:150, y:150, width: 150, height: 150}")])]),t._v(" "),s("p",[t._v("我们还提供了一些其他方法，这些方法可以帮助比较多次图像并在测试结束时确定结果。假设您在测试中有更多操作，并且在每个操作之后都需要比较图像。")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this property will be used to set image name in case it is omitted in test")]),t._v("\n  driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imageHelper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentTest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("sample-test")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" button "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("waitForElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("sampleBtn")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" button"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This method will create image (if not exists) with the name as the test name.")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// In this case, the image name will be `sample-test.png`")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imageHelper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("compareScreen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" button"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This method will create an image (if not exists) with the same name as the test                           // and will add a cpunter as a postfix. In this case, the image name will be `sample-test-2.png`")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imageHelper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("compareScreen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// assert the results of image comparisson.")]),t._v("\n  assert"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isTrue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imageHelper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasImageComparisonPassed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("每个 comare 方法还接受 IImageCompareOptions，它们可用于覆盖图像比较中使用的默认属性。")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IImageCompareOptions")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  imageName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  timeOutSeconds"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n   * pixel\n   * percentage thresholds: 1 = 100%, 0.2 = 20%"\n   */')]),t._v("\n  tolerance"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n   * pixel\n   * percentage thresholds: 1 = 100%, 0.2 = 20%"\n   */')]),t._v("\n  toleranceType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ImageOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * Wait milliseconds before capture creating image\n   * Default value is 2000\n   */")]),t._v("\n  waitBeforeCreatingInitialImageCapture"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * This property will preserve not to add be added _actual postfix on initial image capture\n   */")]),t._v("\n  donNotAppendActualSuffixOnIntialImageCapture"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * This property will ensure that the image name will not be manipulated with count postfix.\n   * This is very convenient in order to reuses image.\n   * Default value is false.\n   */")]),t._v("\n  keepOriginalImageName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * Clip image before compare. Default value excludes status bar(both android and ios) and software buttons(android).\n   */")]),t._v("\n  cropRectangle"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" IRectangle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * Default value is set to true which means that nativescript-dev-appium will save the image\n   * in original size and compare only the part which cropRectangle specifies.\n   * If false, the image size will be reduced and saved by the dimensions of cropRectangle.\n   */")]),t._v("\n  keepOriginalImageSize"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * Default value is set to false. nativescript-dev-appium will recalculate view port for iOS\n   * so that the top/y will start from the end of the status bar\n   * So far appium calculates it even more and some part of safe areas are missed\n   */")]),t._v("\n  keepAppiumViewportRect"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * Defines if an image is device-specific or only by the platform.\n   * Default value is true and the image will be saved in device-specific directory.\n   * If the value is set to false, the image will be saved under ios or android folder.\n   */")]),t._v("\n  isDeviceSpecific"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * Overwrite actual image if doesn't match. Default value is false.\n   */")]),t._v("\n  overwriteActualImage"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"搜索方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搜索方式"}},[t._v("#")]),t._v(" 搜索方式")]),t._v(" "),s("p",[t._v("waitForElement-此方法尝试通过 automationText 查找元素。")]),t._v(" "),s("h4",{attrs:{id:"ci"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ci"}},[t._v("#")]),t._v(" CI")]),t._v(" "),s("p",[t._v("让我们讨论下一个逻辑步骤“应用程序的自动化测试”。这个主题非常广泛，但是我将尝试涵盖要点，这对 CI 尤为重要。"),s("code",[t._v("ns-dev-appium")]),t._v("应该能够在 Appium 支持的所有平台或服务上工作。通常对于本地运行，ns-dev-appium 依赖于移动设备控制器，但此插件不适用于其他供应商。这就是为什么应在这些运行中应用“ --ignoreMobileController”。对于 SauceLab，有一个附加选项"),s("code",[t._v("--sauceLab")]),t._v("可以提供 SauceLab 所需的一些附加设置，并且也将自动忽略移动设备控制器插件。已经有一些博客文章解释了如何在 SauceLabs 和其他产品上执行测试，因此我不会对此做更深入的介绍。我将尝试着重于对您可能有用的其他选项。")]),t._v(" "),s("p",[s("code",[t._v("--imagesPath")]),t._v("-相对于资源/图像的图像路径。由于所有 API 级别的仿真器名称都相同，因此在存储特定于设备的映像时需要区分它。")]),t._v(" "),s("p",[s("code",[t._v('"isHeadless": true')]),t._v("-使用无头模式。此设置应在 appium 功能中提供：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"android28"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"platformName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Android"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"platformVersion"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"28"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"deviceName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Emulator-Api28-Google"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"avd"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Emulator-Api28-Google"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lt"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"newCommandTimeout"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("720")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"isHeadless"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"noReset"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"fullReset"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("h4",{attrs:{id:"下一步是什么？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下一步是什么？"}},[t._v("#")]),t._v(" 下一步是什么？")]),t._v(" "),s("p",[t._v("我们的下一个目标之一是能够同时在多个设备上执行测试。这将帮助您扩展测试基础结构，减少等待时间，提高生产效率。")]),t._v(" "),s("p",[t._v("但是 Appium 集成的路线图主要由您决定。如果您有功能请求，或者只是想解决一些您不知道如何解决的问题，请在 nativescript-dev-appium 存储库中打开一个新问题。")]),t._v(" "),s("Vssue",{attrs:{title:"whats-new-with-nativescript-dev-appium"}})],1)}),[],!1,null,null,null);a.default=n.exports}}]);