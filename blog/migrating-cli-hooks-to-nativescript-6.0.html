<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>将 CLI 挂钩迁移到 NativeScript 6.0 | NativeScript-Vue-Examples</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/img/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/img/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <link rel="alternate" type="application/rss+xml" href="https://nativescript-vue-examples.luzhaoyang.com/rss.xml" title="NativeScript-Vue-Examples RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://nativescript-vue-examples.luzhaoyang.com/feed.atom" title="NativeScript-Vue-Examples Atom Feed">
    <link rel="alternate" type="application/json" href="https://nativescript-vue-examples.luzhaoyang.com/feed.json" title="NativeScript-Vue-Examples JSON Feed">
    <meta name="description" content="🍈 NativeScript and Vue code samples.">
    <meta property="article:modified_time" content="2019-12-17T15:05:35.000Z">
    <meta property="og:site_name" content="NativeScript-Vue-Examples">
    <meta property="og:title" content="将 CLI 挂钩迁移到 NativeScript 6.0">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/blog/migrating-cli-hooks-to-nativescript-6.0.html">
    <meta name="twitter:title" content="将 CLI 挂钩迁移到 NativeScript 6.0">
    <meta name="twitter:url" content="/blog/migrating-cli-hooks-to-nativescript-6.0.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/img/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.1707833f.css" as="style"><link rel="preload" href="/assets/js/app.821997c7.js" as="script"><link rel="preload" href="/assets/js/7.7d754c08.js" as="script"><link rel="preload" href="/assets/js/32.bf52b892.js" as="script"><link rel="preload" href="/assets/js/9.17a149b9.js" as="script"><link rel="preload" href="/assets/js/2.758fdfb9.js" as="script"><link rel="preload" href="/assets/js/1.2ee72ac7.js" as="script"><link rel="preload" href="/assets/js/10.8b7aa78d.js" as="script"><link rel="preload" href="/assets/js/12.8241bb75.js" as="script"><link rel="prefetch" href="/assets/js/100.e078b246.js"><link rel="prefetch" href="/assets/js/101.cf19ba35.js"><link rel="prefetch" href="/assets/js/102.450d3240.js"><link rel="prefetch" href="/assets/js/11.1fb024e3.js"><link rel="prefetch" href="/assets/js/13.1a9044bb.js"><link rel="prefetch" href="/assets/js/14.dacd1f7b.js"><link rel="prefetch" href="/assets/js/15.b537c350.js"><link rel="prefetch" href="/assets/js/16.728d1ea8.js"><link rel="prefetch" href="/assets/js/17.5748e21b.js"><link rel="prefetch" href="/assets/js/18.f83fc2d8.js"><link rel="prefetch" href="/assets/js/19.f3b204b3.js"><link rel="prefetch" href="/assets/js/20.580d5d20.js"><link rel="prefetch" href="/assets/js/21.325fdf14.js"><link rel="prefetch" href="/assets/js/22.82c65830.js"><link rel="prefetch" href="/assets/js/23.05f9d8c9.js"><link rel="prefetch" href="/assets/js/24.4f2700f3.js"><link rel="prefetch" href="/assets/js/25.365b5d23.js"><link rel="prefetch" href="/assets/js/26.1688108b.js"><link rel="prefetch" href="/assets/js/27.814fdb8c.js"><link rel="prefetch" href="/assets/js/28.c94d95f0.js"><link rel="prefetch" href="/assets/js/29.cbcff657.js"><link rel="prefetch" href="/assets/js/3.63485e53.js"><link rel="prefetch" href="/assets/js/30.ec38b169.js"><link rel="prefetch" href="/assets/js/31.7d911545.js"><link rel="prefetch" href="/assets/js/33.5ba7330c.js"><link rel="prefetch" href="/assets/js/34.19f8ed76.js"><link rel="prefetch" href="/assets/js/35.45b10128.js"><link rel="prefetch" href="/assets/js/36.b562d4fd.js"><link rel="prefetch" href="/assets/js/37.88b56e94.js"><link rel="prefetch" href="/assets/js/38.183d6599.js"><link rel="prefetch" href="/assets/js/39.41190393.js"><link rel="prefetch" href="/assets/js/4.ee72f80f.js"><link rel="prefetch" href="/assets/js/40.092e7fa1.js"><link rel="prefetch" href="/assets/js/41.6f75bb6f.js"><link rel="prefetch" href="/assets/js/42.7e3b4221.js"><link rel="prefetch" href="/assets/js/43.dc87d057.js"><link rel="prefetch" href="/assets/js/44.b3b1807c.js"><link rel="prefetch" href="/assets/js/45.b65b24c8.js"><link rel="prefetch" href="/assets/js/46.c9144f67.js"><link rel="prefetch" href="/assets/js/47.ffc832a7.js"><link rel="prefetch" href="/assets/js/48.c474af86.js"><link rel="prefetch" href="/assets/js/49.343f3e48.js"><link rel="prefetch" href="/assets/js/50.e44e4ea3.js"><link rel="prefetch" href="/assets/js/51.b212b030.js"><link rel="prefetch" href="/assets/js/52.3d8b3d00.js"><link rel="prefetch" href="/assets/js/53.a046fef6.js"><link rel="prefetch" href="/assets/js/54.85a2cfe4.js"><link rel="prefetch" href="/assets/js/55.3e1b4a48.js"><link rel="prefetch" href="/assets/js/56.4ad0610b.js"><link rel="prefetch" href="/assets/js/57.e9829dad.js"><link rel="prefetch" href="/assets/js/58.f6752e0b.js"><link rel="prefetch" href="/assets/js/59.07ff7b7f.js"><link rel="prefetch" href="/assets/js/60.dee3bd16.js"><link rel="prefetch" href="/assets/js/61.51e856f8.js"><link rel="prefetch" href="/assets/js/62.1f47dd99.js"><link rel="prefetch" href="/assets/js/63.2b6301fc.js"><link rel="prefetch" href="/assets/js/64.5e636c30.js"><link rel="prefetch" href="/assets/js/65.b9d5a48b.js"><link rel="prefetch" href="/assets/js/66.0089b53d.js"><link rel="prefetch" href="/assets/js/67.7906c653.js"><link rel="prefetch" href="/assets/js/68.8ca56934.js"><link rel="prefetch" href="/assets/js/69.f67c0d82.js"><link rel="prefetch" href="/assets/js/70.856c1671.js"><link rel="prefetch" href="/assets/js/71.a0626c11.js"><link rel="prefetch" href="/assets/js/72.7fec6743.js"><link rel="prefetch" href="/assets/js/73.82a39fef.js"><link rel="prefetch" href="/assets/js/74.ada6c9fb.js"><link rel="prefetch" href="/assets/js/75.d88b1eee.js"><link rel="prefetch" href="/assets/js/76.90a15616.js"><link rel="prefetch" href="/assets/js/77.06a4ad9c.js"><link rel="prefetch" href="/assets/js/78.01d35aa1.js"><link rel="prefetch" href="/assets/js/79.9ce9ff4d.js"><link rel="prefetch" href="/assets/js/8.d7274519.js"><link rel="prefetch" href="/assets/js/80.3a217101.js"><link rel="prefetch" href="/assets/js/81.979a1147.js"><link rel="prefetch" href="/assets/js/82.f7145e23.js"><link rel="prefetch" href="/assets/js/83.139f70a1.js"><link rel="prefetch" href="/assets/js/84.7cbd7e9b.js"><link rel="prefetch" href="/assets/js/85.530df1ac.js"><link rel="prefetch" href="/assets/js/86.39f6b5e3.js"><link rel="prefetch" href="/assets/js/87.9306925f.js"><link rel="prefetch" href="/assets/js/88.bd29cfa8.js"><link rel="prefetch" href="/assets/js/89.a90aa97c.js"><link rel="prefetch" href="/assets/js/90.de104bd7.js"><link rel="prefetch" href="/assets/js/91.e5b084cc.js"><link rel="prefetch" href="/assets/js/92.388c0cdb.js"><link rel="prefetch" href="/assets/js/93.aad02ccd.js"><link rel="prefetch" href="/assets/js/94.a33ad1da.js"><link rel="prefetch" href="/assets/js/95.9a8566ab.js"><link rel="prefetch" href="/assets/js/96.7196fa8e.js"><link rel="prefetch" href="/assets/js/97.e1157379.js"><link rel="prefetch" href="/assets/js/98.fdf5a6dc.js"><link rel="prefetch" href="/assets/js/99.7c67dc8b.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.62e5c8ab.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1707833f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">NativeScript-Vue-Examples</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/cn/getting-started/1-quick-start.html" class="nav-link">
  教程
</a></div><div class="nav-item"><a href="/blog/detecting-shakes-in-nativescript.html" class="nav-link">
  博文
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.nativescriptthemebuilder.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  nativescript theme builder
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.nslayouts.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  learn nativescript layouts
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://play.nativescript.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  playground
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          本机工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://pan.baidu.com/s/1SZb6PG_6V3QUNlinGr7TcA" target="_blank" rel="noopener noreferrer" class="nav-link external">
  android tools download
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/tools/nativescript-vue-extend/nativescript-vue-extend.html" class="nav-link">
  nativescript-vue-extend
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友链" class="dropdown-title"><span class="title">友链</span> <span class="arrow down"></span></button> <button type="button" aria-label="友链" class="mobile-dropdown-title"><span class="title">友链</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nuochong/nativescript-vue-examples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  nativescript-vue-examples
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://nativescript-vue.org/cn/docs/introduction/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  nativescript-vue.org
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vue-auto-complete.luzhaoyang.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue-auto-complete
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://luzhaoyang.com/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  nest
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/nuochong/nativescript-vue-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/cn/getting-started/1-quick-start.html" class="nav-link">
  教程
</a></div><div class="nav-item"><a href="/blog/detecting-shakes-in-nativescript.html" class="nav-link">
  博文
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.nativescriptthemebuilder.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  nativescript theme builder
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.nslayouts.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  learn nativescript layouts
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://play.nativescript.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  playground
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          本机工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://pan.baidu.com/s/1SZb6PG_6V3QUNlinGr7TcA" target="_blank" rel="noopener noreferrer" class="nav-link external">
  android tools download
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/tools/nativescript-vue-extend/nativescript-vue-extend.html" class="nav-link">
  nativescript-vue-extend
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友链" class="dropdown-title"><span class="title">友链</span> <span class="arrow down"></span></button> <button type="button" aria-label="友链" class="mobile-dropdown-title"><span class="title">友链</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nuochong/nativescript-vue-examples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  nativescript-vue-examples
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://nativescript-vue.org/cn/docs/introduction/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  nativescript-vue.org
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vue-auto-complete.luzhaoyang.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue-auto-complete
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://luzhaoyang.com/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  nest
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/nuochong/nativescript-vue-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>博客</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/detecting-shakes-in-nativescript.html" class="sidebar-link">在 NativeScript 中检测震动</a></li><li><a href="/blog/whats-new-with-nativescript-dev-appium.html" class="sidebar-link">nativescript-dev-appium 有什么新功能？</a></li><li><a href="/blog/language-detection-with-nativescript-and-azure-cognitive-services.html" class="sidebar-link">使用 NativeScript 和 Azure 认知服务进行语言检测</a></li><li><a href="/blog/automatic-nativescript-app-deployments-with-fastlane.html" class="sidebar-link">快速通道自动部署 NativeScript 应用程序</a></li><li><a href="/blog/tabs-and-bottomnavigation-nativescripts-two-new-components.html" class="sidebar-link">选项卡和 BottomNavigation-NativeScript 的两个新组件</a></li><li><a href="/blog/getting-your-route-on-with-nativescript-vue-episode-one.html" class="sidebar-link">使用 NativeScript-Vue 入门：第一集</a></li><li><a href="/blog/getting-your-route-on-with-nativescript-vue-episode-two.html" class="sidebar-link">使用 NativeScript-Vue 入门：第二集</a></li><li><a href="/blog/tips-for-vue-developers-picking-up-nativescript.html" class="sidebar-link">Vue 开发人员选择 NativeScript 的技巧</a></li><li><a href="/blog/working-with-vuex-in-your-nativescript-vue-application-now-with-cats.html" class="sidebar-link">在 NativeScript-Vue 应用程序中使用 Vuex-现在使用 Cats！</a></li><li><a href="/blog/working-with-vuex-in-your-nativescript-vue-application.html" class="sidebar-link">在 NativeScript-Vue 应用程序中使用 Vuex</a></li><li><a href="/blog/building-responsive-apps-with-nativescript.html" class="sidebar-link">使用 NativeScript 构建响应式应用程序</a></li><li><a href="/blog/client-side-storage-in-nativescript-applications.html" class="sidebar-link">NativeScript 应用程序中的客户端存储</a></li><li><a href="/blog/dependency-versions-in-nativescript-playground.html" class="sidebar-link">NativeScript Playground 中的依赖项版本</a></li><li><a href="/blog/migrating-nativescript-plugins-to-androidx.html" class="sidebar-link">将 NativeScript 插件迁移到 AndroidX</a></li><li><a href="/blog/offloading-tasks-to-worker-threads-with-nativescript.html" class="sidebar-link">使用 NativeScript 将任务卸载到辅助线程</a></li><li><a href="/blog/how-to-convince-management-to-use-nativescript-for-mobile-app-development.html" class="sidebar-link">如何说服管理层使用 NativeScript 进行移动应用开发</a></li><li><a href="/blog/migrating-cli-hooks-to-nativescript-6.0.html" aria-current="page" class="active sidebar-link">将 CLI 挂钩迁移到 NativeScript 6.0</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/nativescript-6.0-application-migration.html" class="sidebar-link">迁移到 NativeScript 6.0</a></li><li><a href="/blog/the-new-ios-runtime-powered-by-v8.html" class="sidebar-link">由 V8 提供支持的新 iOS 运行时</a></li><li><a href="/blog/updates-in-the-nativescript-cli-6.0-bundle-workflow-webpack-only-and-hmr-by-default.html" class="sidebar-link">NativeScript CLI 6.0 中的更新：默认情况下捆绑工作流，仅 Webpack 和 HMR</a></li><li><a href="/blog/nativescript-now-supports-angular-8.html" class="sidebar-link">NativeScript 现在支持 Angular 8</a></li><li><a href="/blog/listview-radlistview-and-repeater-why-do-i-need-three.html" class="sidebar-link">ListView，RadListView 和 Repeater-为什么需要三个？</a></li><li><a href="/blog/what-the-apple-supreme-court-decision-means-for-developers.html" class="sidebar-link">苹果最高法院的判决对开发商意味着什么</a></li><li><a href="/blog/managing-component-state-in-nativescript-listview.html" class="sidebar-link">在 NativeScript ListView 中管理组件状态</a></li><li><a href="/blog/adding-objective-c-code-to-a-nativescript-app.html" class="sidebar-link">将 Objective-C 代码添加到 NativeScript 应用程序</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="将-cli-挂钩迁移到-nativescript-6-0"><a href="#将-cli-挂钩迁移到-nativescript-6-0" class="header-anchor">#</a> 将 CLI 挂钩迁移到 NativeScript 6.0</h3> <div class="meta wrapper"><div class="date-container"><span class="date">
    </span></div> · <span class="reading-time" data-v-ea2f7eb8>
</span></div> <p>如您所知，即将发布的 NativeScript 6.0 版本仅支持捆绑的版本，如果不使用 webpack，您将不再能够运行您的应用程序。这些工作流程更改还会影响 NativeScript CLI 中的挂钩机制。<br>
在本文中，我们将研究什么是 NativeScript 挂钩，以及如何迁移挂钩以运行 NativeScript 6.0 CLI。</p> <h4 id="简而言之-nativescript-挂钩"><a href="#简而言之-nativescript-挂钩" class="header-anchor">#</a> 简而言之，NativeScript 挂钩</h4> <p>NativeScript 挂钩是可执行的代码段或 Node.js 脚本，可以由应用程序或插件开发人员添加，以自定义特定 NativeScript 命令的执行。通过插入应用程序构建过程的不同部分，它们使您能够执行特殊活动。NativeScript CLI 支持两种不同的执行挂钩的方式：</p> <ul><li>流程执行</li> <li>通过 Node.js 衍生函数生成执行</li></ul> <h5 id="钩子的进程内执行"><a href="#钩子的进程内执行" class="header-anchor">#</a> 钩子的进程内执行</h5> <p>进程内执行仅适用于 JavaScript 挂钩。NativeScript CLI <code>in-process</code>根据该<code>module.exports</code>语句确定是否应执行该挂钩。因此，为了启用进程内执行，您只需要<code>module.exports =</code>在钩子中使用 …语句即可。例如，如果挂钩脚本为：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$logger</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>然后，CLI 将需要钩子脚本，并且将通过注入器调用导出的函数。在<code>in-process</code>执行让你使用任何可用的服务从 NativeScript CLI 的灵活性。</p> <h5 id="产生钩子的执行"><a href="#产生钩子的执行" class="header-anchor">#</a> 产生钩子的执行</h5> <p>如果 NativeScript CLI 无法找到<code>module.exports = statement</code>，它将使用 Node.js childProcess.spawn 函数执行挂钩。使用这种方法时，您将无法使用 NativeScript CLI 中的任何服务。</p> <h5 id="hookargs"><a href="#hookargs" class="header-anchor">#</a> hookArgs</h5> <p>NativeScript CLI 支持名为的特殊参数<code>hookArgs</code>。的<code>hookArgs</code>是包含所有传递到钩状方法的参数的对象。例如，假设 NativeScript CLI 的方法<code>checkForChanges</code>具有以下定义：</p> <div class="language-ts extra-class"><pre class="language-ts"><code>@<span class="token function">hook</span><span class="token punctuation">(</span><span class="token string">&quot;checkForChanges&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">checkForChanges</span><span class="token punctuation">(</span>platformData<span class="token operator">:</span> IPlatformData<span class="token punctuation">,</span>
  projectData<span class="token operator">:</span> IProjectData<span class="token punctuation">,</span> prepareData<span class="token operator">:</span> IPrepareData<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><p>然后，<code>hookArgs</code>将具有以下结构：</p> <div class="language-ts extra-class"><pre class="language-ts"><code>hookArgs<span class="token operator">:</span> <span class="token punctuation">{</span>
  platformData<span class="token punctuation">,</span> projectData<span class="token punctuation">,</span> prepareData<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>注意：<code>hookArgs</code>每个挂钩的对象都不相同。</p></div> <h4 id="我需要迁移吗"><a href="#我需要迁移吗" class="header-anchor">#</a> 我需要迁移吗？</h4> <p>考虑到这一背景，让我们看看您（应用程序或插件开发人员）将您的钩子迁移到 NativeScript 6.0 所需执行的操作。</p> <p>如果您的应用程序或插件不使用挂钩，则无需迁移，也不需要其他操作。您现在可以停止阅读。</p> <p>如果您的应用程序或插件具有挂钩，则需要检查挂钩是否受 NativeScript 6.0 更改的影响。</p> <h4 id="nativescript-挂钩中的确切变化是什么"><a href="#nativescript-挂钩中的确切变化是什么" class="header-anchor">#</a> NativeScript 挂钩中的确切变化是什么？</h4> <p>NativeScript CLI 6.0 不会更改挂钩的加载，处理和执行方式，但是，整个 NativeScript CLI 都经过了重构，这种重构可能会影响您的挂钩。以下是与挂钩相关的主要更改：</p> <ul><li>挂钩工作流程</li> <li>的结构 <code>hookArgs</code></li> <li>通过 NativeScript CLI 注入的服务的名称</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>注意：有关 hookArgs 的结构和注入的服务的名称的更改仅影响 in-process 钩子。</p></div> <p>在以下情况下，您可以安全地跳过接下来的两个部分：</p> <ol><li>您是一名应用程序开发人员，所有的想法都来自插件。在这种情况下，如果仍然存在与 6.0 CLI 不兼容的插件，则应更新到最新版本的插件，并在插件的存储库中记录问题。</li> <li>您是应用程序开发人员，所有自定义的挂钩都缺少该<code>module.exports =</code>语句，例如，挂钩将不会执行<code>in-process</code>。</li> <li>您是一名插件开发人员，所有的挂钩都在插件<code>{ inject: false }</code>内部标记了<code>package.json</code>，例如，挂钩将不会执行<code>in-process</code>。</li></ol> <h4 id="挂钩工作流程"><a href="#挂钩工作流程" class="header-anchor">#</a> 挂钩工作流程</h4> <p>NativeScript CLI 中的挂钩机制旨在允许在执行 CLI 的某些特定部分之前和之后执行其他操作。如果返回具体值或 Promise，则该挂钩被视为之前/之后挂钩。</p> <p>以下挂钩将作为之前/之后挂钩执行：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">module</span><span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>$logger<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    $logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'Executed before/after some CLI action/function.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>这是 NativeScript CLI 支持的所有挂钩：</p> <h4 id="准备"><a href="#准备" class="header-anchor">#</a> 准备</h4> <p>正是在 NativeScript CLI 启动 Webpack 编译和本机文件的监视程序之前/之后执行此挂钩，例如，实际准备应用程序。</p> <ul><li>使用旧版工作流程时，它将在应用程序的初始同步以及 NativeScript CLI 在监视模式下运行时的每次更改上执行。</li> <li>在 6.0 CLI 中，挂钩仅在应用程序的初始同步上执行。</li></ul> <h4 id="checkforchanges"><a href="#checkforchanges" class="header-anchor">#</a> checkForChanges</h4> <p>该挂钩在 NativeScript CLI 检查应用程序中是否有更改之前/之后执行。NativeScript CLI 保留应用程序的状态，并基于此状态决定是否应在设备上重建，重新安装或重新启动应用程序。该挂钩是在使用旧版工作流程准备挂钩之前执行的，但是将在之后使用 6.0 CLI 执行。</p> <ul><li>使用旧版工作流，此钩子将在应用程序的初始同步以及在 NativeScript CLI 以监视模式运行时的每次更改上执行。</li> <li>在 6.0 CLI 中，此挂钩在应用程序的初始同步上执行。NativeScript CLI 检查自上次执行以来是否更改了本机文件。本机文件是 App_Resources 和 platform 文件夹中的所有文件。当更改了本机文件时，NativeScript CLI 将重建应用程序。</li></ul> <h4 id="预览前同步"><a href="#预览前同步" class="header-anchor">#</a> 预览前同步</h4> <p>当执行预览命令时，NativeScript CLI 将显示 QR 码。当使用设备扫描 QR 码并将设备报告给 CLI 时，将执行此挂钩。</p> <h4 id="watchpatterns"><a href="#watchpatterns" class="header-anchor">#</a> watchPatterns</h4> <p>正是在 NativeScript CLI 尝试确定用于监视应用程序的全局模式之前，将执行此挂钩。此处的目的是，这允许您更改模式，以防您要监视其他目录或从监视中排除目录。</p> <h4 id="观看前"><a href="#观看前" class="header-anchor">#</a> 观看前</h4> <p>恰好在 NativeScript CLI 开始监视项目目录之前执行此挂钩。</p> <h4 id="观察后"><a href="#观察后" class="header-anchor">#</a> 观察后</h4> <p>当 NativeScript CLI 停止监视项目目录时，将执行此挂钩。在以下情况下可能会发生这种情况：</p> <ul><li>在运行 NativeScipt CLI 的终端中按 Ctrl + C 时</li> <li>当用于 LiveSync 进程的所有设备都断开连接时</li> <li>当 LiveSync 进程出现问题并且 NativeScript CLI 无法实时同步所做的更改时。</li></ul> <h4 id="after-createproject"><a href="#after-createproject" class="header-anchor">#</a> after-createProject</h4> <p>从模板创建项目后，将执行此挂钩。</p> <h4 id="buildandroidplugin"><a href="#buildandroidplugin" class="header-anchor">#</a> buildAndroidPlugin</h4> <p>该挂钩是在构建 Android 插件的.aar 之前/之后执行的。</p> <h4 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h4> <p>该挂钩在应用程序安装在连接的设备或仿真器/模拟器上之前/之后执行。</p> <h4 id="应该准备"><a href="#应该准备" class="header-anchor">#</a> 应该准备</h4> <p>该挂钩在 NativeScript CLI 决定是否需要准备应用程序的任何部分之前/之后执行。该挂钩已在 NativeScript 6.0 中删除。</p> <h4 id="cleanapp"><a href="#cleanapp" class="header-anchor">#</a> cleanApp</h4> <p>该挂钩在 NativeScript CLI 清理 platform 目录中的 app 目录之前/之后执行。此挂钩已在 NativeScript 6.0 中删除。</p> <h4 id="hookargs-的结构"><a href="#hookargs-的结构" class="header-anchor">#</a> hookArgs 的结构</h4> <p>的<code>hookArgs</code>是含有钩状方法的所有参数的对象。更多信息可以在这里找到。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>注意：hookArgs 每个挂钩的对象都不相同。</p></div> <p>例如，假设<code>checkForChanges</code>我们的插件或应用程序中有一个钩子。当前，<code>hookArgs</code>for <code>checkForChanges</code>hook 的结构如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    checkForChangesOpts<span class="token operator">:</span> <span class="token punctuation">{</span>
        platform<span class="token punctuation">,</span>
        projectData<span class="token punctuation">,</span>
        projectChangesOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            nativePlatformStatus<span class="token punctuation">,</span>
            provision<span class="token punctuation">,</span>
            teamId<span class="token punctuation">,</span>
            bundle<span class="token punctuation">,</span>
            release
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在即将发布的 6.0 版本中，以上结构将更改为以下内容：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  projectData<span class="token punctuation">,</span> platformData<span class="token punctuation">,</span> prepareData<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>让我们看看钩子使用来自的平台属性的情况<code>hookArgs</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">hookArgs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> platform <span class="token operator">=</span> hookArgs<span class="token punctuation">.</span>checkForChangesOpts<span class="token punctuation">.</span>platform<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The hook will be executed for </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>platform<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> platform.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在 NativeScript 6.0 中，以上代码需要更改为：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">hookArgs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> platform <span class="token operator">=</span> hookArgs<span class="token punctuation">.</span>prepareData<span class="token punctuation">.</span>platform<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The hook will be executed for platform </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>platform<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>您可以轻松地使代码向后和向前兼容，如下所示：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">hookArgs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> platform <span class="token operator">=</span> <span class="token punctuation">(</span>hookArgs<span class="token punctuation">.</span>checkForChangesOpts <span class="token operator">&amp;&amp;</span> hookArgs<span class="token punctuation">.</span>checkForChangesOpts<span class="token punctuation">.</span>platform<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>hookArgs<span class="token punctuation">.</span>prepareData <span class="token operator">&amp;&amp;</span> hookArgs<span class="token punctuation">.</span>prepareData<span class="token punctuation">.</span>platform<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>我们已经迁移了以下挂钩，以使其向后和向前兼容：</p> <ul><li>原生脚本</li> <li>本地脚本</li> <li>nativescript 单元测试运行程序</li> <li>nativescript-plugin-firebase</li> <li>Kinvey-Nativescript-SDK</li></ul> <p>这是 NativeScript CLI 支持的所有挂钩的完整映射：</p> <table><thead><tr><th style="text-align:left;"></th> <th style="text-align:left;">HookArgs 6.0 之前的版本</th> <th style="text-align:left;">HookArgs 6.0</th> <th style="text-align:left;">状态</th></tr></thead> <tbody><tr><td style="text-align:left;">准备</td> <td style="text-align:left;">{config}</td> <td style="text-align:left;">{prepareData}</td> <td style="text-align:left;">CHANGED 更多信息，可以发现在这里。</td></tr> <tr><td style="text-align:left;">checkForChanges</td> <td style="text-align:left;">{platform，projectData，projectChangesOptions}</td> <td style="text-align:left;">{platformData，projectData，prepareData}</td> <td style="text-align:left;">CHANGED 更多信息，可以发现在这里。</td></tr> <tr><td style="text-align:left;">预览前同步</td> <td style="text-align:left;">{projectData，hmrData，config，externals}</td> <td style="text-align:left;">{platform，projectDir，projectData，useHotModuleReload，env}</td> <td style="text-align:left;">CHANGED 更多信息，可以发现在这里。</td></tr> <tr><td style="text-align:left;">watchPatterns</td> <td style="text-align:left;">{liveSyncData，projectData}</td> <td style="text-align:left;">{platformData，projectData}</td> <td style="text-align:left;">CHANGED 更多信息，可以发现在这里。</td></tr> <tr><td style="text-align:left;">观看前</td> <td style="text-align:left;">{projectData，config，filesToSync，filesToRemove，hmrData}</td> <td style="text-align:left;">{platformData，projectData，prepareData}</td> <td style="text-align:left;">CHANGED 更多信息，可以发现在这里。</td></tr> <tr><td style="text-align:left;">观察后</td> <td style="text-align:left;">{projectData}</td> <td style="text-align:left;">同前</td> <td style="text-align:left;">未更改 更多信息可以在这里找到。</td></tr> <tr><td style="text-align:left;">after-createProject</td> <td style="text-align:left;">{projectCreationSettings}</td> <td style="text-align:left;">同前</td> <td style="text-align:left;">未更改 更多信息可以在这里找到。</td></tr> <tr><td style="text-align:left;">之前的 AndroidPlugin</td> <td style="text-align:left;">{pluginBuildSettings}</td> <td style="text-align:left;">同前</td> <td style="text-align:left;">未更改 更多信息可以在这里找到。</td></tr> <tr><td style="text-align:left;">安装</td> <td style="text-align:left;">{packageFilePath，appIdentifier}</td> <td style="text-align:left;">同前</td> <td style="text-align:left;">未更改 更多信息可以在这里找到。</td></tr> <tr><td style="text-align:left;">应该准备</td> <td style="text-align:left;">{shouldPrepareInfo}</td> <td style="text-align:left;">–</td> <td style="text-align:left;">在这里可以找到更多信息。</td></tr> <tr><td style="text-align:left;">cleanApp</td> <td style="text-align:left;">{platformInfo}</td> <td style="text-align:left;">–</td> <td style="text-align:left;">HOOK DELETED 在这里可以找到更多信息。</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>注意：如果您的挂钩属于 CHANGED 类别并且使用<code>hookArgs</code>，则需要迁移挂钩。</p> <p>注意：如果您的钩子属于“未更改”类别 ，则仍然必须从钩子中检查注入的服务的名称。</p> <p>注意：如果您的钩子在 DELETED 类别中，则可以打开一个问题并描述您的情况，以便我们可以帮助您找到适合您情况的钩子。</p></div> <h4 id="从-nativescript-cli-注入的服务"><a href="#从-nativescript-cli-注入的服务" class="header-anchor">#</a> 从 NativeScript CLI 注入的服务</h4> <p>NativeScript CLI 提供了非常强大 in-process 的钩子执行功能，使您可以使用注入器中可用的 NativeScript CLI 中的所有注册服务。的完整列表可以在此处找到。当前的解析机制基于名称而不是对象类型。如果从 NativeScript CLI 中删除或重命名了注入的服务，并且未根据该更改迁移该挂钩，则 NativeScript CLI 将不会执行该挂钩并显示警告。</p> <p>让我们看一下具有以下注入服务的钩子：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$logger<span class="token punctuation">,</span> $platformsData<span class="token punctuation">,</span> $projectData<span class="token punctuation">,</span> hookArgs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>上面的挂钩将无法通过 NativeScript 6.0 CLI 执行，因为<code>$platformsData</code>由于将其<code>$platformsData</code>重命名为，因此无法解析<code>$platformsDataService</code>。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>注意：NativeScript CLI 将警告您挂钩将不会执行，因为它具有无效的参数-$ platformsData。</p></div> <p>在这种情况下，我们需要迁移钩子：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$logger<span class="token punctuation">,</span> $projectData<span class="token punctuation">,</span> $injector<span class="token punctuation">,</span> hookArgs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> platformsData <span class="token operator">=</span> <span class="token function">getPlatformsData</span><span class="token punctuation">(</span>$injector<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getPlatformsData</span><span class="token punctuation">(</span><span class="token parameter">$injector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> $injector<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'platformsData'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> $injector<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'platformsDataService'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这是从 NativeScript CLI 注入最频繁的服务的映射：</p> <table><thead><tr><th style="text-align:left;">先前的服务名称 6.0</th> <th style="text-align:left;">在 6.0 中替换</th></tr></thead> <tbody><tr><td style="text-align:left;">$ platformsData</td> <td style="text-align:left;">$ platformsDataService</td></tr> <tr><td style="text-align:left;">$ liveSyncService</td> <td style="text-align:left;">$ runController</td></tr> <tr><td style="text-align:left;">$ platformService</td> <td style="text-align:left;">$ runController</td></tr> <tr><td style="text-align:left;">$ projectData</td> <td style="text-align:left;">$ projectData</td></tr> <tr><td style="text-align:left;">$ logger</td> <td style="text-align:left;">$ logger</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>注意：该<code>$logger.out</code>方法在 NativeScript 6.0 中删除，并替换为<code>$logger.info</code>。</p></div> <h4 id="摘要"><a href="#摘要" class="header-anchor">#</a> 摘要</h4> <p>这就是 NativeScript 6.0 版本挂钩的所有更改。我们鼓励您迁移钩子并使它们向后兼容。这样，如果您是插件作者，其他开发人员将能够同时使用 5.4 和 6.0 CLI 来使用您的插件，并且您不会强迫他们升级其现有应用程序。处理重大更改可能很烦人，但是我们在这里，将帮助您使过渡更加顺畅。只需创建一个描述您的问题的新问题，我们将协助您找到解决方案！</p> <!----></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/nuochong/nativescript-vue-docs/edit/master/docs/blog/migrating-cli-hooks-to-nativescript-6.0.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2019-12-17 23:05:35</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/how-to-convince-management-to-use-nativescript-for-mobile-app-development.html" class="prev">
        如何说服管理层使用 NativeScript 进行移动应用开发
      </a></span> <span class="next"><a href="/blog/nativescript-6.0-application-migration.html">
        迁移到 NativeScript 6.0
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.821997c7.js" defer></script><script src="/assets/js/7.7d754c08.js" defer></script><script src="/assets/js/32.bf52b892.js" defer></script><script src="/assets/js/9.17a149b9.js" defer></script><script src="/assets/js/2.758fdfb9.js" defer></script><script src="/assets/js/1.2ee72ac7.js" defer></script><script src="/assets/js/10.8b7aa78d.js" defer></script><script src="/assets/js/12.8241bb75.js" defer></script>
  </body>
</html>
